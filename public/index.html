<!doctype html>
<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <script src="/socket.io/socket.io.js"></script>
    <script src="../node_modules/soundfont-player/dist/soundfont-player.js"></script>
    <script src="reverb.js"></script>

    <script type="text/javascript">
        // quick n dirty so i can share DFCommon.js with node.js. I could also use Browserify if it gets any more complex
        let module = {};
    </script>

    <script src="DFCommon.js"></script>
    <script src="log.js"></script>
    <script src="midi.js"></script>
    <script src="net.js"></script>
    <script src="adhsr.js"></script>
    <script src="polySynth.js"></script>
    <script src="synth.js"></script>
    <script src="app.js"></script>

    <!-- ui -->
    <script type="text/babel" src="ui/right.js"></script>

    <style>
        body {
            background-color: black;
            color: #0aa;
            font-family: 'Courier New', Courier, monospace;
            font-weight: bold;
            font-size: medium;
        }

        html,
        body {
            width: 100%;
            height: 100%;
            border: 0;
            padding: 0;
            margin: 0;
        }

        ul {
            list-style: none;
            padding: 10px;
        }

        /* https://grid.layoutit.com/ */
        #grid-container {
            height: 100vh;
            width: 100%;

            display: grid;
            grid-template-columns: 1fr 300px;
            grid-template-rows: 0fr 1fr 0fr 150px;
            gap: 5px 5px;
            grid-template-areas:
                "headerArea headerArea"
                "roomArea rightArea"
                "chatArea rightArea"
                "pianoArea rightArea";
        }

        #grid-container>* {
            background-color: #222;
        }

        #roomArea {
            background-color: black;
            color: #339;
            background-repeat: no-repeat;
            position: relative;
            transition: background-position 1s;
            /* transition-delay: .5s; */
        }

        .component {
            padding: 5px;
            width: 100%;
            border: 4px solid #044;
            box-sizing: border-box;
            margin-bottom: 20px;
        }

        .component>h2 {
            background-color: #044;
            padding: 5px;
            margin: 0;
            border: 0;
            font-size: larger;
        }

        .headerArea {
            padding: 15px;
        }

        .headerArea a:link,
        .headerArea a:visited,
        .headerArea a {
            color: #044;
        }

        @keyframes avatarBump1 {
            0% {
                transform: translate(0px, 0px);
                animation-timing-function: ease-in-out;
            }

            10% {
                transform: translate(0px, 4px);
            }

            100% {
                transform: translate(0px, 0px);
            }
        }

        /* exact duplicate of the other, so when i toggle between the classes, it resets the animation. why doesn't CSS let you reset one-shot animations?? */
        @keyframes avatarBump2 {
            0% {
                transform: translate(0px, 0px);
                animation-timing-function: ease-in-out;
            }

            10% {
                transform: translate(0px, 4px);
            }

            100% {
                transform: translate(0px, 0px);
            }
        }


        .userAvatarActivityBump1 {
            animation: avatarBump1 .2s 1;
        }

        .userAvatarActivityBump2 {
            animation: avatarBump2 .2s 1;
        }

        .userAvatar {
            position: absolute;
            transition: top .5s, left .5s;
            border-radius: 5px;
            border-width: 1px;
            border-style: solid;
            padding: 7px;
            background-color: rgba(0, 0, 0, .5);
            text-align: center;
            filter: drop-shadow(0px 10px 10px rgba(0, 0, 0, .5));
        }

        .userAvatar.me {
            border-top-width: 10px;
        }

        #chatArea {
            padding: 10px;
        }
    </style>
</head>

<body id="body">

    <script type="text/babel">

        ReactDOM.render(
            <RootArea />,
            document.getElementById('root')
        );
    </script>

    <div id="root" style="height:100vh;"></div>

    <div class="area">
        <h2>Debug log</h2>
        <button onclick="$('#log').html('')">clear log</button>
        <pre id="log"
            style="border:2px solid blue; background-color: rgb(211, 211, 211);max-height: 50%;width: 100%; max-width:900px; overflow: scroll;"></pre>
    </div>

</body>

</html>